{% extends "base.html" %}
{% block js_content %}
    <script src="/static/js/TlibJSFixedHeaderTable3.js?q={{ appVer }}" type="text/javascript"></script>
{% endblock %}
{% block css_content %}
    <link rel="stylesheet" type="text/css" href="/static/css/schedule_table.css?q={{appVer}}">
{% endblock %}
{% block header_name %} {{ header_name }} {% endblock %}
{% block container_content %}
    <style type="text/css">
        body {
            overflow: hidden;
        }
        .info-th {
            background:#4BB0E0;
            border:1px solid white;
            height:30px;
            width:200px;
        }
        .info-title-td {
            border-spacing:10px;
            border:1px solid white;
            background:#DAE8EE;
            height:30px;
            width:150px;
        }
        .info-content-td {
            border:1px solid white;
            background:#DAE8EE;
            height:30px;
            width:300px;
        }
        .info-btn {
            background:#4BB0E0;
            border: solid 1px gray;
            color:white;
            padding: 0px 15px;
            font-size: 20px;
        }
        .fix_detail {
            position: absolute;
            left: 10px;
            top: 220px;
            z-index: 999;
        }
        td.td_link{
            cursor: auto;
        }
    </style>

    <div class="row">
        <br>
        <button type="button" class="info-btn" onclick="editClick()">Edit</button>
        <button type="button" class="info-btn" onclick="deleteClick()">Delete</button>
        <button type="button" class="info-btn" onclick="closeClick()">Close</button>
    </div>
    <br>
    <div class="row">
        <div class="search-result-div clear-float">
            {% include "part_outage_schedule_list.html" %}
            <div class="fix_detail">
                <table cellpadding="5">
                    <thead>
                        <tr>
                            <th class="info-th"></th>
                            <th class="info-th"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="height:3px;"></tr>
                        <tr>
                            <td class="info-title-td">Start</td>
                            <td class="info-content-td">{{ outage_schedule_info.outage_start|sys_dfmt }}</td>
                        </tr>
                        <tr>
                            <td class="info-title-td">End</td>
                            <td class="info-content-td">{{ outage_schedule_info.outage_end|sys_dfmt}}</td>
                        </tr>
                        <tr>
                            <td class="info-title-td">Duration</td>
                            <td class="info-content-td">{{ outage_schedule_info.outage_duration }} days</td>
                        </tr>
                        <tr>
                            <td class="info-title-td" rowspan="2">Outage Type</td>
                            <td class="info-content-td">{{ outage_schedule_info.outage_type_t_nm or '' }}</td>
                        </tr>
                        <tr>
                            <td class="info-content-td">{{ outage_schedule_info.outage_type_g_nm or '' }}</td>
                        </tr>
                        <tr>
                            <td class="info-title-td">Execution(%)</td>
                            <td class="info-content-td">{{ outage_schedule_info.execution or '' }}%</td>
                        </tr>
                        <tr>
                            <td class="info-title-td">Description</td>
                            <td class="info-content-td">
                                <div id="description" style="overflow: auto; max-height: 100px; max-width: 300px;">{{ outage_schedule_info.description_html }}</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="info-title-td">1st PR Date(Mechanical)</td>
                            <td class="info-content-td">
                                <div id="description" style="overflow: auto; max-height: 100px; max-width: 300px;">{{ outage_schedule_info.pr_date_m|sys_dfmt }}</div>
                            </td>
                        </tr>
                        <tr>
                            <td class="info-title-td">1st PR Date(Electric)</td>
                            <td class="info-content-td">
                                <div id="description" style="overflow: auto; max-height: 100px; max-width: 300px;">{{ outage_schedule_info.pr_date_e|sys_dfmt }}</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <script>
        //<![CDATA[
        $(function () {
            {% if menu_param["outage_schedule_list"] %}
                fixedResultTable();
            {% endif %}
        });

        function fixedResultTable() {
            var fixedHeaderCols = 9;

            initTlibJSFixedHeaderTable(
                {
                    table_div: 'schedule_form-schedule_list',
                    header_cols: fixedHeaderCols,
                    bg_color: ''
                });
        }


        function closeClick() {
            window.close();
        }

        function editClick() {
            outage_schedule_edit('{{ outage_schedule_info.turbine_id }}', '{{ outage_schedule_info.teiken_id }}', '{{ form.date_start.data }}', '{{ form.date_end.data }}');
        }

        function deleteClick() {
            if (!confirm("Are you sure to delete this data?")) return;
            var url = "{{ url_for('outage_schedule_delete') }}";
            showCover("お待ちください...");
            $.post(url, {teiken_id:'{{form.teiken_id.data}}'}).done(function (data) {
                hideCover();
                if (data.msg) {
                     alert(data.msg);
                }else{
                    window.opener.search();
                    window.close();
                }
            }).fail(function () {
                hideCover();
                alert('delete faild!');
            })
        }

        //]]>
    </script>
{% endblock %}